cmake_minimum_required(VERSION 3.15)

set(VCPKG_TARGET_TRIPLET "x64-windows-static" CACHE STRING "")
set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>" CACHE STRING "")

project(My-MM)

set(CMAKE_CXX_STANDARD 17)


set(CMAKE_PREFIX_PATH "C:/dev/vcpkg/installed/x64-windows-static")


#set(OPENSSL_ROOT_DIR "C:/dev/vcpkg/installed/x64-windows-static")
#set(OPENSSL_USE_STATIC_LIBS TRUE)

find_package(OpenSSL REQUIRED)
find_package(fmt CONFIG REQUIRED)
#find_package(httplib CONFIG REQUIRED)
find_package(nlohmann_json CONFIG REQUIRED)
find_package(ixwebsocket REQUIRED)


add_executable(My-MM 
    main.cpp 
    ScanMarket.cpp 
    SOMEvaluator.cpp
    E
)

target_link_libraries(My-MM PRIVATE
    fmt::fmt
    #httplib::httplib
    nlohmann_json::nlohmann_json
    #OpenSSL::SSL 
    #OpenSSL::Crypto 
    ixwebsocket::ixwebsocket
    ws2_32
    crypt32
    advapi32
    bcrypt
)

## reset build folder
#Remove-Item -Recurse -Force build
# build changes of CMakeLists.txt
#cmake -B build -S . -DCMAKE_TOOLCHAIN_FILE="C:/dev/vcpkg/scripts/buildsystems/vcpkg.cmake" -DVCPKG_TARGET_TRIPLET=x64-windows-static
# build
#cmake --build build --config Release
# run
#& "C:\Users\Michihiko Kubota\Documents\MM\btc-tracker\build\Release\My-MM.exe"        